<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talk to Teacher Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .form-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
        }
        .form-container h2 {
            text-align: center;
            color: #333;
        }
        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
            color: #333;
        }
        select, textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        textarea {
            resize: vertical;
            height: 100px;
        }
        .submit-button {
            position: relative;
            display: inline-block;
            padding: 10px 20px;
            color: #fff;
            background-color: #5cb85c;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .submit-button[disabled] {
            background-color: #ccc;
        }
        .funnel-container {
            width: 100%;
            height: 20px;
            background-color: #ddd;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
            position: relative;
        }
        .funnel-fill {
            width: 0;
            height: 100%;
            background-color: #5cb85c;
            transition: width 0.1s linear;
        }
    </style>
</head>
<body>

<div class="form-container">
    <h2>Talk to Teacher</h2>
    <form id="talkToTeacherForm" action="https://script.google.com/macros/s/AKfycbzd6etsF1_djfNLAyVJh4_vpyEFGUT4ZzwRFEwguFVEBapLgB0YxmE9HPR0D_3kZBBGDw/exec" method="GET">
        <label for="studentName">Select Your Name:</label>
        <select id="studentName" name="studentName" required>
            <option value="" disabled selected>Select your name</option>
           <option value="ab51ne">ab51ne</option>
    <option value="ac19pe">ac19pe</option>
    <option value="ac46me">ac46me</option>
    <option value="ai55ne">ai55ne</option>
    <option value="an43me">an43me</option>
    <option value="as88re">as88re</option>
    <option value="at20me">at20me</option>
    <option value="aw83ne">aw83ne</option>
    <option value="ay13ne">ay13ne</option>
    <option value="ay56ne">ay56ne</option>
    <option value="az23ne">az23ne</option>
    <option value="ba75ne">ba75ne</option>
    <option value="ba54me">ba54me</option>
    <option value="ba57mi">ba57mi</option>
    <option value="ba94ne">ba94ne</option>
    <option value="be00ne">be00ne</option>
    <option value="be14ne">be14ne</option>
    <option value="bo19ne">bo19ne</option>
    <option value="ch30ne">ch30ne</option>
    <option value="choone">choone</option>
    <option value="cl63le">cl63le</option>
    <option value="do00ne">do00ne</option>
    <option value="ek60me">ek60me</option>
    <option value="em00ne">em00ne</option>
    <option value="et00ne">et00ne</option>
    <option value="eu64ne">eu64ne</option>
    <option value="fe27ne">fe27ne</option>
    <option value="fo59ne">fo59ne</option>
    <option value="fo64ne">fo64ne</option>
    <option value="fo73ne">fo73ne</option>
    <option value="gr01ne">gr01ne</option>
    <option value="jo58ne">jo58ne</option>
    <option value="ke38ne">ke38ne</option>
    <option value="ki72ne">ki72ne</option>
    <option value="ki05mi">ki05mi</option>
    <option value="ki63me">ki63me</option>
    <option value="ko47ne">ko47ne</option>
    <option value="ku76me">ku76me</option>
    <option value="kw03ne">kw03ne</option>
    <option value="le36me">le36me</option>
    <option value="li94ne">li94ne</option>
    <option value="lo94me">lo94me</option>
    <option value="ma03me">ma03me</option>
    <option value="ma23pe">ma23pe</option>
    <option value="mb17le">mb17le</option>
    <option value="mb73ne">mb73ne</option>
    <option value="mc63ne">mc63ne</option>
    <option value="me88me">me88me</option>
    <option value="me90ne">me90ne</option>
    <option value="mo37ne">mo37ne</option>
    <option value="mu01ne">mu01ne</option>
    <option value="na00ne">na00ne</option>
    <option value="nc54me">nc54me</option>
    <option value="nd26me">nd26me</option>
    <option value="ne23ne">ne23ne</option>
    <option value="nf71mi">nf71mi</option>
    <option value="ng01ne">ng01ne</option>
    <option value="ng95me">ng95me</option>
    <option value="tc84me">tc84me</option>
    <option value="nk98ne">nk98ne</option>
    <option value="no41ne">no41ne</option>
    <option value="no50ne">no50ne</option>
    <option value="ns00ne">ns00ne</option>
    <option value="ns05le">ns05le</option>
    <option value="ns27pe">ns27pe</option>
    <option value="ny59me">ny59me</option>
    <option value="nyoone">nyoone</option>
    <option value="on22mi">on22mi</option>
    <option value="ov55ne">ov55ne</option>
    <option value="pa03me">pa03me</option>
    <option value="pr20ne">pr20ne</option>
    <option value="ra93de">ra93de</option>
    <option value="si88me">si88me</option>
    <option value="ng37me">ng37me</option>
    <option value="so28me">so28me</option>
    <option value="so88me">so88me</option>
    <option value="ta10ne">ta10ne</option>
    <option value="ta02me">ta02me</option>
    <option value="ta79ne">ta79ne</option>
    <option value="te14ne">te14ne</option>
    <option value="te23ne">te23ne</option>
    <option value="te50ne">te50ne</option>
    <option value="ti10ne">ti10ne</option>
    <option value="ti93ne">ti93ne</option>
    <option value="to36ne">to36ne</option>
    <option value="to42ne">to42ne</option>
    <option value="wa00ne">wa00ne</option>
    <option value="aw59mi">aw59mi</option>
    <option value="yo84ne">yo84ne</option>
    <option value="zo34me">zo34me</option>
    <option value="mb63sf">mb63sf</option>
    <option value="bi70sf">bi70sf</option>
    <option value="nk22sf">nk22sf</option>
    <option value="ng43sf">ng43sf</option>
    <option value="ng67sf">ng67sf</option>
    <option value="nn58sf">nn58sf</option>
    <option value="ke47sf">ke47sf</option>
    <option value="nj35tf">nj35tf</option>
    <option value="si20ocae">si20ocae</option>
    <option value="mb13ocae">mb13ocae</option>
            <!-- Continue adding student names... -->
        </select>

        <label for="module">Select Module:</label>
        <select id="module" name="module" required>
            <option value="" disabled selected>Select module</option>
            <option value="ICT I">ICT I</option>
            <option value="Functional English">Functional English</option>
            <option value="Medical Sociology and Anthropology">Medical Sociology and Anthropology</option>
            <option value="General Biochemistry">General Biochemistry</option>
            <option value="General Microbiology and Parasitology">General Microbiology and Parasitology</option>
            <option value="General Pharmacology I">General Pharmacology I</option>
            <option value="Anatomy and Physiology IA">Anatomy and Physiology IA</option>
            <option value="Health Care Ethics">Health Care Ethics</option>
            <option value="Medico Sanitary Techniques">Medico Sanitary Techniques</option>
            <option value="Medical Law and Citizenship">Medical Law and Citizenship</option>
            <option value="Anatomy and Physiology IB">Anatomy and Physiology IB</option>
            <!-- Add other modules as options... -->
        </select>

        <label for="teacher">Select Teacher:</label>
        <select id="teacher" name="teacher" required>
            <option value="" disabled selected>Select teacher</option>
            <option value="Mr. Sundaram">Mr. Sundaram</option>
            <option value="Ms Aanchal">Ms Aanchal</option>
            <option value="Ms Kavita">Ms Kavita</option>
            <option value="Ms Jolene">Ms Jolene</option>
            <option value="Ms Yamini">Ms Yamini</option>
            <option value="Ms Dipali">Ms Dipali</option>
            <!-- Add other teachers as options... -->
        </select>

        <label for="question">Your Question/Query/Comment:</label>
        <textarea id="question" name="question" required placeholder="Type your question here..."></textarea>

        <button type="submit" class="submit-button" id="submitButton">Send</button>
        
        <!-- Funnel-style progress bar -->
        <div class="funnel-container">
            <div class="funnel-fill" id="funnelFill"></div>
        </div>
    </form>
</div>

<script>
    const form = document.getElementById('talkToTeacherForm');
    const submitButton = document.getElementById('submitButton');
    const funnelFill = document.getElementById('funnelFill');
    let funnelInterval;

    form.onsubmit = async (e) => {
        e.preventDefault();

        // Reset and start filling the funnel
        funnelFill.style.width = "0";
        let fillPercentage = 0;
        funnelInterval = setInterval(() => {
            if (fillPercentage < 100) {
                fillPercentage += 1; // Adjust the speed of filling here if needed
                funnelFill.style.width = fillPercentage + "%";
            }
        }, 30); // Adjust interval speed as needed for visual effect

        submitButton.disabled = true;

        // Send form data as JSONP
        const formData = new FormData(form);
        const queryString = new URLSearchParams(formData).toString();
        const url = form.action + "?callback=handleResponse&" + queryString;

        // Create a script tag for JSONP
        const script = document.createElement('script');
        script.src = url;
        document.body.appendChild(script);
    };

    // JSONP callback function
    function handleResponse(response) {
        clearInterval(funnelInterval); // Stop filling the funnel

        if (response.status === 'success') {
            funnelFill.style.width = "100%"; // Fill the funnel to indicate completion
            setTimeout(() => {
                funnelFill.style.width = "0"; // Reset after showing success
                submitButton.disabled = false;
                alert("Your question has been submitted successfully!");
                form.reset();
            }, 500); // Delay to show the filled funnel for a moment
        } else {
            funnelFill.style.width = "0"; // Reset the funnel on error
            submitButton.disabled = false;
            alert("There was an error submitting your question. Please try again.");
        }
    }
</script>

</body>
</html>
